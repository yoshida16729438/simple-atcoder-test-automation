# simple-atcoder-test-automation

## 概要
このプロジェクトは、サンプルダウンロードツール(AtCoderHelper)とテストツール(TestExecutor)で構成されています。 \
AtCoderHelperはコマンドラインインターフェースで動作するインタラクティブなツールです。コンテストページからサンプルの入出力例を検知し、ダウンロードします。 \
TestExecutorはコマンドラインツールで、AtCoderHelperでダウンロードされた入力をMain.javaに与え、出力を突合します。 \
これらのツールは非常にシンプルかつ数少ない機能しか提供しませんが、ソースコードの理解が容易なので簡単にカスタマイズが可能です。 \
このプロジェクトはデフォルトではJavaのテストしかサポートしませんが、ご利用の言語に合ったテストツールのみ自作すれば、AtCoderHelperはそれと容易に連携できます。 \
このツールの実行環境はデフォルトではWindowsに限られますが、実行用シェルスクリプトを作成するだけで他環境でも利用可能です。

## 他ツールとの差別化
### 長所
- 容易な理解とカスタマイズを可能とするシンプルかつ小さなプロジェクト
- インタラクティブなインターフェースによる、シンプルで短く、理解が容易なコマンド操作
### 短所
- ログイン、提出、コンテスト中のサンプルダウンロードに対応していない
- デフォルトの言語サポートはJavaのみ

## 構成
各ツールは以下の構成となっています。
- AtCoderHelper:
  - start.ps1
  - AtCoderHelper.java
  - Constants.java
- TestExecutor:
  - execute_tests.ps1
  - TestExecutor.java
  - Constants.java

## 用語定義
- コンテスト名とタスク名
  AtCoderHelper内で「コンテスト名」「タスク(名)」の入力を求められた場合、問題ページのURLを参照して該当するものを入力してください。 \
  https://atcoder.jp/contests/[コンテスト名]/tasks/[コンテスト名]_[タスク(名)]

## 使い方
まずはこのリポジトリをDownload ZIPからダウンロードしてください。 \
(Main.javaを頻繁に書き換えることになりますので、git cloneは非推奨です。)

### AtCoderHelper
start.psをPowershell上で実行してください。 \
本ツールはexitコマンドが入力されるまでPowershell上で動作し続けます。 \
以下のコマンドが利用できます。
- contest
  参照するコンテストを切り替えます。(例: "abc416" "arc123" など)
- task
  参照するタスクを切り替え、サンプルをダウンロードします。(例： "a" "d" など。contestコマンドで事前に指定したコンテストの該当するタスクを参照し、"abc416_a"や"arc123_d"と解釈されます。) \
  サンプルの入出力はそれぞれ"./testdata/input/"と"./testdata/answer/"に出力されます。(Constants.javaを編集するとフォルダを変更できます)
- test
  TestExecutorが実行されます。
- exit
  ツールが停止します。
利用可能なコマンドは常にターミナル上で表示されるので、覚える必要はありません。

### TestExecutor
execute_tests.ps1をPowershell上で実行してください。 \
本ツールは全てのテストケースを実行すると自動で終了します。 \
本ツールは"./testdata/input/"から入力データを読み込み、Main.javaによって生成される出力を"./testdata/output/"に保存して、結果を"./testdata/answer/"と比較します。(Constans.javaを編集するとフォルダを変更できます) \
各サンプルの比較結果と実行時間は標準出力から取得可能です。 \
このツールにはコマンドや入力パラメータはありません。

## 備考
- AtCoderHelperは自動的にサンプル入出力を検知しますが、検知ロジックが単純なため一部タスクでは検知に失敗します。(例: abc013以前など古いコンテスト、abc411_dのようにhtmlの\<pre\>タグの使い方が他と異なるもの、おそらくインタラクティブなテストなど)
- AtCoderHelperはログイン機能を持ちませんが、AtCoderはコンテスト開催中に該当コンテストのタスクページ閲覧にはログインを要求するため、コンテスト中はサンプルダウンロード機能は正常に動作しません。 \
  (ログイン処理の実装予定はありませんが、サンプルダウンロード用のChrome拡張機能の開発を検討しています。)
- TestExecutorによる結果比較は非常に単純なもので、余計な空白が入っただけで失敗と判定することがあります。
  しかしそのままでもAtCoder上ではACとなる場合がありますので、出力フォルダを参照し、不十分な比較による失敗なのか、本当に結果が誤っているのか確認することをお勧めします。
- 何か異常が発生して強制停止したい場合はCtrl+Cを押してください。
